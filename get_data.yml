---

  - name: "Get data: {{ action }}" 
    local_action: >
       idrac choice={{ action }} idracuser={{ idracuser }}
            idracpswd={{ idracpswd }} idracip={{ idracip }}
    register: result

  - name: Print inventory file
    local_action: copy content={{ result | to_nice_json }}
                       dest={{ json_file }}

  # Using simple JSON parser jq (https://stedolan.github.io/jq/) to further
  # simplify output. Uncomment once you have it installed. 
# - local_action: shell jq .result {{ json_file }} > {{ json_file }}.final
# - local_action: file path={{ json_file }} state=absent
